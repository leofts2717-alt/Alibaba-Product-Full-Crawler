# 🚀 AliFullCrawler - 阿里国际站全量商品抓取工具 (V3.0)

**AliFullCrawler** 是 AliMonitor 套件中的核心组件之一。它被设计用于**初次建立数据库**或**定期进行全店商品盘点**。

与监控脚本不同，它的目标不是“找不同”，而是**“一个不漏”**地把店铺内所有商品（包括 ID、型号、负责人、最后更新时间等）完整抓取并保存到本地 CSV 文件中。

> **当前版本**: V3.0 (Smart Lock & Universal Scroll)
> **适用场景**: 首次使用初始化 / 丢失数据后重建 / 每周全店盘点

---

## ✨ 核心特性

### 1. 🕸️ 智能全量抓取
*   **自动翻页**：自动识别“下一页”按钮状态，直到爬完最后一页。
*   **去重机制**：内置翻页检测逻辑，防止因网络卡顿导致在同一页死循环。

### 2. 📜 万能滚动机制 (Universal Scroll)
*   **双重保障**：针对阿里后台复杂的懒加载（Lazy Load）机制，脚本优先尝试容器滚动。
*   **全局兜底**：如果专用滚动条失效，自动切换为 **Window 全局滚动模式**，确保页面底部的商品一定能被加载出来。

### 3. 🎯 智能窗口锁定
*   脚本启动时会自动遍历浏览器内所有打开的标签页。
*   一旦发现包含 `manage_products` 的阿里后台页面，会自动将其**激活并置顶**，无需人工干预窗口位置。

### 4. 🛡️ 强力防崩设计
*   **智能等待**：不再死板地等待固定时间，而是使用 `wait_for_selector` 动态等待元素加载。
*   **容错处理**：遇到网络波动或空页面时，会自动重试或优雅退出，而不是直接报错崩溃。

---

## 🛠️ 前置准备

### 1. 开启调试端口 Chrome
(如果你已经为监控脚本配置过，可跳过此步)

1.  复制 Chrome 图标，重命名为 **“阿里监控专用”**。
2.  右键属性 -> 目标(Target)，在末尾加空格粘贴：
    ```text
    --remote-debugging-port=9222 --user-data-dir="C:\ChromeDebug"
    ```
3.  点击保存。

### 2. 登录后台
1.  双击该图标启动浏览器。
2.  登录阿里国际站，打开 **My Alibaba -> 商品管理** 页面。

---

## 🏃‍♂️ 运行指南

### 第一步：配置路径
打开脚本文件（例如 `FullC.py`），确认文件保存路径：

```python
# 结果保存路径
CSV_FILE_PATH = r"C:\Users\YourName\Desktop\AliMonitor\result.csv"
